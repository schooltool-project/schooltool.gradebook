<tal:define define="dummy view/update"/>
<html metal:use-macro="view/@@standard_macros/page" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" i18n:translate="">Layout Report Card</title>
</head>
<body>

<h1 metal:fill-slot="content-header"
    i18n:translate="">Layout Report Card</h1>

<metal:block metal:fill-slot="body">
  <form method="post"
        tal:attributes="action string:${context/@@absolute_url}/layout_report_card.html">
    <input type="hidden" name="form-submitted" value="" />

    <table>
      <tr>
        <td></td>
        <td align="center">Source</td>
        <td align="center">Heading</td>
        <td>Remove?</td>
      </tr>

      <tal:block repeat="column view/columns">
        <tr>
          <td>
            <label tal:attributes="for column/source_name"
                   tal:content="column/source_name" />
          </td>
          <td>
            <select tal:attributes="id column/source_name; name column/source_name">
              <tal:block repeat="choice view/choices">
              <option tal:condition="python: choice['value'] == column['source_value']"
                      selected
                      tal:attributes="value choice/value"
                      tal:content="choice/name" />
              <option tal:condition="python: choice['value'] != column['source_value']"
                      tal:attributes="value choice/value"
                      tal:content="choice/name" />
              </tal:block>
            </select>
          </td>
          <td align="center">
            <input type="text"
                   tal:attributes="name column/heading_name; value column/heading_value" />
          </td>
          <td align="center">
            <input type="checkbox" name="delete:list"
                   tal:attributes="value column/source_name" />
          </td>
        </tr>
      </tal:block>

      <tr>
        <td>
          <label for="new_source" i18n:translate="">New Column</label>
        </td>
        <td>
          <select id="new_source" name="new_source">
            <option selected value="">Choose a column to add</option>
            <tal:block repeat="choice view/choices">
              <option tal:attributes="value choice/value"
                      tal:content="choice/name" />
            </tal:block>
          </select>
        </td>
        <td>
          <input type="text" name="new_heading" />
        </td>
      </tr>

    </table>
    <div class="controls">
      <input type="submit" class="button-ok" name="Update" value="Update" />
    </div>
  </form>

</metal:block>
</body>
</html>

